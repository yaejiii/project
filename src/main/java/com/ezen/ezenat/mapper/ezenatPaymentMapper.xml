<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="com.ezen.ezenat.mapper.ezenatPaymentMapper">
		
	<select id="check_order_history_code" parameterType="String" resultType="int">
		select count(*) from ezenat_order_history where 
		order_history_num = #{code} 
	</select>	
	
	
 	<insert id="insert_order_history" parameterType="EzenatOrderHistoryDTO">
		insert into ezenat_order_history values(
			 #{order_history_num}
			, #{member_num}
			, #{total_price}
			, #{used_point} 
			, #{discount}
			, #{delivery_fee}
			, #{order_history_password, jdbcType=VARCHAR}
			, sysdate
		)
	</insert>
	
	<insert id="insert_order_product">
		insert into ezenat_order_product values(
			ezenat_order_product_seq.nextval
			, #{product_num}
			, #{order_history_num}
			, #{tracking_number, jdbcType=VARCHAR}
			, #{order_product_price}
			, #{order_product_qty}
			, '배송준비중'
		)
	</insert> 
	
	<insert id="insert_order_receive">
	insert into ezenat_order_receive values(
			 #{rcv_name}
	 		, #{rcv_hp}
	 		, #{rcv_hp2}
	 		, #{rcv_hp3}
	  		, #{rcv_tel1 , jdbcType = VARCHAR}
	  		, #{rcv_tel2 , jdbcType = VARCHAR}
	  		, #{rcv_tel3 , jdbcType = VARCHAR}
	 		, #{zip_code}
	 		, #{address}
	 		, #{address_detail}
	 		, #{rcv_request}
		)
	</insert>
	
	<insert id="insert_point_history">
		insert into ezenat_point_history values(
		
		)
	</insert>
	
	<insert id="insert_coupon_history">
		insert into ezenat_coupon_history values(
		
		)
	</insert>
	
<!-- <insert id="insert_coupon_num">
		insert into ezenat_coupon(coupon_num) values(ezenat_coupon_seq.nextval)
	</insert> -->
	
	<select id="select_coupon_num" resultType="int">
		select ezenat_coupon_seq.nextval from dual
	</select>

	
<!-- <insert id="insert_coupon" parameterType="EzenatCouponDTO">
		
	</insert> -->
</mapper>